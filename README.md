# Runmates - ãƒ©ãƒ³ãƒ‹ãƒ³ã‚°ç®¡ç†ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³

Runmatesã¯ã€ãƒ©ãƒ³ãƒ‹ãƒ³ã‚°æ„›å¥½å®¶ã®ãŸã‚ã®åŒ…æ‹¬çš„ãªè¨˜éŒ²ç®¡ç†ãƒ»ç›®æ¨™è¿½è·¡ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ã™ã€‚æ—¥ã€…ã®ãƒ©ãƒ³ãƒ‹ãƒ³ã‚°è¨˜éŒ²ã‚’ç°¡å˜ã«è¨˜éŒ²ã—ã€æœˆé–“ãƒ»å¹´é–“ç›®æ¨™ã®é”æˆçŠ¶æ³ã‚’è¦–è¦šçš„ã«æŠŠæ¡ã§ãã¾ã™ã€‚

## ğŸ’­ é–‹ç™ºèƒŒæ™¯

ã“ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¯ã€ä»¥ä¸‹ã®2ã¤ã®å€‹äººçš„ãªç›®çš„ã‹ã‚‰é–‹ç™ºã‚’ã‚¹ã‚¿ãƒ¼ãƒˆã—ã¾ã—ãŸï¼š

### 1. ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã¨ã—ã¦ã®å­¦ç¿’æ©Ÿä¼šã®å‰µå‡º
ãƒ•ãƒ«ã‚¹ã‚¿ãƒƒã‚¯ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã¨ã—ã¦ã®ã‚¹ã‚­ãƒ«å‘ä¸Šã‚’ç›®æŒ‡ã—ã€ãƒ¢ãƒ€ãƒ³ãªæŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯ï¼ˆRails API + Next.jsï¼‰ã‚’ä½¿ç”¨ã—ãŸå®Ÿè·µçš„ãªã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³é–‹ç™ºã‚’é€šã˜ã¦ã€ãƒãƒ³ã‚ºã‚ªãƒ³ã§å­¦ç¿’ã™ã‚‹æ©Ÿä¼šã‚’ä½œã‚ŠãŸã„ã¨è€ƒãˆã¾ã—ãŸã€‚å®Ÿéš›ã®ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆé–‹ç™ºã‚’é€šã˜ã¦ã€è¨­è¨ˆãƒ»å®Ÿè£…ãƒ»ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ»é‹ç”¨ã¾ã§ä¸€è²«ã—ã¦çµŒé¨“ã™ã‚‹ã“ã¨ã§ã€ã‚ˆã‚Šæ·±ã„ç†è§£ã¨å®Ÿè·µåŠ›ã‚’èº«ã«ã¤ã‘ã‚‹ã“ã¨ã‚’ç›®æŒ‡ã—ã¦ã„ã¾ã™ã€‚

### 2. ãƒ©ãƒ³ãƒ‹ãƒ³ã‚°ã®ãƒ¢ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³ç¶­æŒ
è¶£å‘³ã®ãƒ©ãƒ³ãƒ‹ãƒ³ã‚°ã‚’ç¶™ç¶šã™ã‚‹ä¸Šã§ã€æ—¥ã€…ã®è¨˜éŒ²ã‚’å¯è¦–åŒ–ã—ã€ç›®æ¨™é”æˆçŠ¶æ³ã‚’æŠŠæ¡ã™ã‚‹ã“ã¨ãŒãƒ¢ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³ç¶­æŒã«é‡è¦ã ã¨æ„Ÿã˜ã¦ã„ã¾ã—ãŸã€‚æ—¢å­˜ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ã¯æº€ãŸã›ãªã„è‡ªåˆ†ãªã‚Šã®ãƒ‹ãƒ¼ã‚ºã«å¿œãˆã‚‹ãŸã‚ã€ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºå¯èƒ½ãªå€‹äººç”¨ãƒ„ãƒ¼ãƒ«ã¨ã—ã¦é–‹ç™ºã‚’é€²ã‚ã¦ã„ã¾ã™ã€‚

ã“ã‚Œã‚‰ã®ç›®çš„ã‚’ä¸¡ç«‹ã•ã›ã‚‹ã“ã¨ã§ã€ã€Œä½œã‚ŠãªãŒã‚‰å­¦ã³ã€ä½¿ã„ãªãŒã‚‰æ”¹å–„ã™ã‚‹ã€ã¨ã„ã†ç¶™ç¶šçš„ãªé–‹ç™ºã‚µã‚¤ã‚¯ãƒ«ã‚’å®Ÿç¾ã—ã¦ã„ã¾ã™ã€‚

## ğŸ¯ ä¸»è¦æ©Ÿèƒ½

- ğŸ“… **ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹** - ç›´æ„Ÿçš„ãªæ—¥ä»˜é¸æŠã§ãƒ©ãƒ³ãƒ‹ãƒ³ã‚°è¨˜éŒ²ã‚’ç®¡ç†
- ğŸ¯ **ç›®æ¨™è¨­å®šã¨è¿½è·¡** - æœˆé–“ãƒ»å¹´é–“ã®è·é›¢ç›®æ¨™ã‚’è¨­å®šã—ã€é”æˆç‡ã‚’ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ è¡¨ç¤º
- ğŸ“Š **ãƒ‡ãƒ¼ã‚¿å¯è¦–åŒ–** - Chart.jsã«ã‚ˆã‚‹ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãªã‚°ãƒ©ãƒ•ã§é€²æ—ã‚’è¦–è¦šåŒ–
- ğŸ“± **ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³** - ã‚¹ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ³ã‹ã‚‰ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã¾ã§æœ€é©åŒ–ã•ã‚ŒãŸ UI
- ğŸ” **ã‚»ã‚­ãƒ¥ã‚¢ãªèªè¨¼** - HTTP-onlyã‚¯ãƒƒã‚­ãƒ¼ã«ã‚ˆã‚‹å®‰å…¨ãªèªè¨¼ã‚·ã‚¹ãƒ†ãƒ 
- ğŸ“§ **ãƒ¡ãƒ¼ãƒ«é€šçŸ¥** - ã‚¦ã‚§ãƒ«ã‚«ãƒ ãƒ¡ãƒ¼ãƒ«ã€ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒªã‚»ãƒƒãƒˆç­‰ã®è‡ªå‹•é€ä¿¡

## ğŸ›  æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

### Backend (Rails API)
- **Framework**: Rails 8.0.2 (Ruby 3.4.3)
- **Database**: MySQL 8.0.32
- **Authentication**: DeviseTokenAuth (HTTP-only Cookie)
- **ä¸»è¦Gem**:
  - `rack-cors` - CORSå¯¾å¿œ
  - `factory_bot_rails` - ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ç”Ÿæˆ
  - `rspec-rails` - ãƒ†ã‚¹ãƒˆãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯
  - `rubocop` - ã‚³ãƒ¼ãƒ‰å“è³ªç®¡ç†
  - `simplecov` - ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸æ¸¬å®š
  - `brakeman` - ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¹ã‚­ãƒ£ãƒ³
  - `bundle-audit` - è„†å¼±æ€§ãƒã‚§ãƒƒã‚¯
  - `rswag` - APIä»•æ§˜æ›¸ç”Ÿæˆ

### Frontend (Next.js)
- **Framework**: Next.js 15.3.1 with TypeScript
- **Styling**: Tailwind CSS + shadcn/ui
- **ä¸»è¦ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸**:
  - `react-hook-form` - ãƒ•ã‚©ãƒ¼ãƒ ç®¡ç†ã¨ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
  - `date-fns` - æ—¥ä»˜å‡¦ç†ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
  - `axios` - HTTPé€šä¿¡
  - `chart.js` + `react-chartjs-2` - ãƒ‡ãƒ¼ã‚¿å¯è¦–åŒ–
  - `js-cookie` - ã‚¯ãƒƒã‚­ãƒ¼ç®¡ç†
  - `@radix-ui` - UIãƒ—ãƒªãƒŸãƒ†ã‚£ãƒ–ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

### Infrastructure
- **Container**: Docker & Docker Compose
- **Frontend Hosting**: Vercel
- **Backend Hosting**: AWS ECS Fargate
- **Database**: Amazon RDS (MySQL)
- **CI/CD**: GitHub Actions (Backend) / Vercel (Frontend)
- **Proxy**: Nginx (Production)

## ğŸ“ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ 

```
runmates/
â”œâ”€â”€ rails/                       # Railsãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ controllers/        # APIã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼
â”‚   â”‚   â”‚   â””â”€â”€ api/v1/        # API v1ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
â”‚   â”‚   â”‚       â”œâ”€â”€ auth/      # èªè¨¼é–¢é€£
â”‚   â”‚   â”‚       â””â”€â”€ current/   # ç¾åœ¨ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼é–¢é€£
â”‚   â”‚   â”œâ”€â”€ models/             # ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«
â”‚   â”‚   â”œâ”€â”€ mailers/            # ãƒ¡ãƒ¼ãƒ«é€ä¿¡
â”‚   â”‚   â”œâ”€â”€ jobs/               # éåŒæœŸã‚¸ãƒ§ãƒ–ï¼ˆSolidQueueï¼‰
â”‚   â”‚   â”œâ”€â”€ serializers/        # JSONã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚¶ãƒ¼
â”‚   â”‚   â””â”€â”€ views/              # ãƒ¡ãƒ¼ãƒ«ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
â”‚   â”œâ”€â”€ config/                 # è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«
â”‚   â”‚   â”œâ”€â”€ initializers/       # åˆæœŸåŒ–è¨­å®šï¼ˆCORSã€DeviseTokenAuthç­‰ï¼‰
â”‚   â”‚   â”œâ”€â”€ credentials.yml.enc # æš—å·åŒ–ã•ã‚ŒãŸèªè¨¼æƒ…å ±
â”‚   â”‚   â””â”€â”€ routes.rb           # ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°å®šç¾©
â”‚   â”œâ”€â”€ db/                     # ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹é–¢é€£
â”‚   â”‚   â”œâ”€â”€ migrate/            # ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
â”‚   â”‚   â””â”€â”€ schema.rb           # ã‚¹ã‚­ãƒ¼ãƒå®šç¾©
â”‚   â”œâ”€â”€ spec/                   # RSpecãƒ†ã‚¹ãƒˆ
â”‚   â”‚   â”œâ”€â”€ models/             # ãƒ¢ãƒ‡ãƒ«ãƒ†ã‚¹ãƒˆ
â”‚   â”‚   â”œâ”€â”€ requests/           # APIãƒ†ã‚¹ãƒˆ
â”‚   â”‚   â””â”€â”€ factories/          # ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿
â”‚   â”œâ”€â”€ swagger/                # APIä»•æ§˜æ›¸
â”‚   â”‚   â””â”€â”€ v1/
â”‚   â”‚       â””â”€â”€ swagger.yaml    # OpenAPIä»•æ§˜
â”‚   â””â”€â”€ lib/
â”‚       â””â”€â”€ tasks/              # Rakeã‚¿ã‚¹ã‚¯ï¼ˆannotateç­‰ï¼‰
â”œâ”€â”€ next/                        # Next.jsãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ app/                # App Router
â”‚   â”‚   â”‚   â”œâ”€â”€ (auth)/        # èªè¨¼ãŒå¿…è¦ãªãƒšãƒ¼ã‚¸
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ dashboard/ # ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
â”‚   â”‚   â”‚   â”œâ”€â”€ sign_in/       # ãƒ­ã‚°ã‚¤ãƒ³ãƒšãƒ¼ã‚¸
â”‚   â”‚   â”‚   â”œâ”€â”€ sign_up/       # ç™»éŒ²ãƒšãƒ¼ã‚¸
â”‚   â”‚   â”‚   â””â”€â”€ layout.tsx     # ãƒ«ãƒ¼ãƒˆãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ
â”‚   â”‚   â”œâ”€â”€ components/         # å…±é€šUIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”‚   â”‚   â””â”€â”€ ui/            # shadcn/ui ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”‚   â”œâ”€â”€ features/           # æ©Ÿèƒ½åˆ¥ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«
â”‚   â”‚   â”‚   â”œâ”€â”€ auth/           # èªè¨¼æ©Ÿèƒ½
â”‚   â”‚   â”‚   â”œâ”€â”€ running/        # ãƒ©ãƒ³ãƒ‹ãƒ³ã‚°è¨˜éŒ²æ©Ÿèƒ½
â”‚   â”‚   â”‚   â”œâ”€â”€ account/        # ã‚¢ã‚«ã‚¦ãƒ³ãƒˆç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ profile/        # ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«
â”‚   â”‚   â”‚   â””â”€â”€ settings/       # è¨­å®š
â”‚   â”‚   â”œâ”€â”€ lib/                # ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
â”‚   â”‚   â”‚   â””â”€â”€ api/           # APIé€šä¿¡å±¤
â”‚   â”‚   â””â”€â”€ middleware.ts       # èªè¨¼ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢
â”‚   â”œâ”€â”€ public/                 # é™çš„ãƒ•ã‚¡ã‚¤ãƒ«
â”‚   â””â”€â”€ package.json            # ä¾å­˜é–¢ä¿‚
â”œâ”€â”€ docker-compose.yml          # Dockerè¨­å®š
â”œâ”€â”€ .github/                    # GitHubè¨­å®š
â”‚   â”œâ”€â”€ workflows/              # GitHub Actions
â”‚   â”‚   â”œâ”€â”€ cd.yml             # ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼
â”‚   â”‚   â””â”€â”€ ci.yml             # ãƒ†ã‚¹ãƒˆãƒ»å“è³ªãƒã‚§ãƒƒã‚¯
â”‚   â”œâ”€â”€ ISSUE_TEMPLATE/         # Issueãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
â”‚   â”‚   â”œâ”€â”€ bug_report.md      # ãƒã‚°ãƒ¬ãƒãƒ¼ãƒˆç”¨
â”‚   â”‚   â””â”€â”€ feature_request.md # æ©Ÿèƒ½è¦æœ›ç”¨
â”‚   â””â”€â”€ PULL_REQUEST_TEMPLATE.md # PRãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
â”œâ”€â”€ .claude/                    # Claude Codeè¨­å®š
â”‚   â”œâ”€â”€ commands/               # ã‚«ã‚¹ã‚¿ãƒ ã‚³ãƒãƒ³ãƒ‰
â”‚   â”‚   â”œâ”€â”€ cpr.md             # PRä½œæˆã‚³ãƒãƒ³ãƒ‰
â”‚   â”‚   â”œâ”€â”€ security.md        # ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒã‚§ãƒƒã‚¯
â”‚   â”‚   â”œâ”€â”€ security-next.md   # Next.jsã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£
â”‚   â”‚   â””â”€â”€ security-rails.md  # Railsã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£
â”‚   â”œâ”€â”€ hooks/                  # è‡ªå‹•åŒ–ãƒ•ãƒƒã‚¯
â”‚   â”‚   â”œâ”€â”€ github-templates.md    # GitHubãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
â”‚   â”‚   â”œâ”€â”€ notification-sounds.md # é€šçŸ¥éŸ³è¨­å®š
â”‚   â”‚   â””â”€â”€ pre-commit-checks.md   # ã‚³ãƒŸãƒƒãƒˆå‰ãƒã‚§ãƒƒã‚¯
â”‚   â””â”€â”€ settings.local.json    # ãƒ­ãƒ¼ã‚«ãƒ«è¨­å®š
â”œâ”€â”€ .cursor/                    # Cursor IDEè¨­å®š
â”œâ”€â”€ CLAUDE.md                   # Claude Codeç”¨ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³
â”œâ”€â”€ vercel.json                 # Vercelãƒ‡ãƒ—ãƒ­ã‚¤è¨­å®š
â””â”€â”€ README.md                   # ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«
```

## ğŸš€ é–‹ç™ºç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

### å‰ææ¡ä»¶
- Docker Desktop ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹ã“ã¨
- Git ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹ã“ã¨

### åˆå›ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

```bash
# 1. ãƒªãƒã‚¸ãƒˆãƒªã‚’ã‚¯ãƒ­ãƒ¼ãƒ³
git clone https://github.com/hata-junnosuke/runmates.git
cd runmates

# 2. Dockerã‚³ãƒ³ãƒ†ãƒŠã‚’ãƒ“ãƒ«ãƒ‰ãƒ»èµ·å‹•
docker compose build --no-cache
docker compose up

# 3. ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ï¼ˆæ–°ã—ã„ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§ï¼‰
docker compose exec next /bin/bash
npm i
npm run dev  # http://localhost:8000

# 4. ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ï¼ˆæ–°ã—ã„ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§ï¼‰
docker compose exec rails /bin/bash
rails db:create
rails db:migrate
rails db:seed  # ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿æŠ•å…¥ï¼ˆé–‹ç™ºç’°å¢ƒã®ã¿ï¼‰

# 5. Rails Credentialsè¨­å®šï¼ˆé‡è¦ï¼‰
# ç’°å¢ƒå¤‰æ•°ã‚’è¨­å®šã™ã‚‹ãŸã‚ã«credentialsã‚’ç·¨é›†
docker-compose exec rails bash -c "EDITOR='vi' rails credentials:edit"
# ä»¥ä¸‹ã®å†…å®¹ã‚’è¿½åŠ :
# development:
#   frontend_url: http://localhost:8000
# production:
#   frontend_url: https://runmates.net
# ï¼ˆviã‚¨ãƒ‡ã‚£ã‚¿: i ã§æŒ¿å…¥ãƒ¢ãƒ¼ãƒ‰ã€ESCã§çµ‚äº†ã€:wq ã§ä¿å­˜ï¼‰

# 6. Railsã‚µãƒ¼ãƒãƒ¼èµ·å‹•
rails s -b '0.0.0.0'  # http://localhost:3000
```

## ğŸ’» é–‹ç™ºã‚³ãƒãƒ³ãƒ‰

**é‡è¦**: å…¨ã¦ã®ã‚³ãƒãƒ³ãƒ‰ã¯Dockerã‚³ãƒ³ãƒ†ãƒŠå†…ã§å®Ÿè¡Œã—ã¦ãã ã•ã„

### Backend (Rails)

```bash
# ã‚µãƒ¼ãƒãƒ¼èµ·å‹•
docker-compose exec rails rails s -b '0.0.0.0'

# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ“ä½œ
docker-compose exec rails rails db:migrate
docker-compose exec rails rails db:seed
docker-compose exec rails rails db:rollback

# ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
docker-compose exec rails bundle exec rspec              # å…¨ãƒ†ã‚¹ãƒˆ
docker-compose exec rails bundle exec rspec spec/models/  # ãƒ¢ãƒ‡ãƒ«ãƒ†ã‚¹ãƒˆã®ã¿
docker-compose exec rails bundle exec rspec --format documentation  # è©³ç´°è¡¨ç¤º

# ã‚³ãƒ¼ãƒ‰å“è³ªãƒã‚§ãƒƒã‚¯
docker-compose exec rails bundle exec rubocop       # Rubyã‚³ãƒ¼ãƒ‰ãƒã‚§ãƒƒã‚¯
docker-compose exec rails bundle exec rubocop -a    # è‡ªå‹•ä¿®æ­£
docker-compose exec rails bundle exec rubocop -A    # ã‚ˆã‚Šç©æ¥µçš„ãªè‡ªå‹•ä¿®æ­£

# ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒã‚§ãƒƒã‚¯
docker-compose exec rails bundle exec brakeman      # ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¹ã‚­ãƒ£ãƒ³
docker-compose exec rails bundle exec bundle-audit  # è„†å¼±æ€§ãƒã‚§ãƒƒã‚¯

# Railsã‚³ãƒ³ã‚½ãƒ¼ãƒ«
docker-compose exec rails rails console
```

### Frontend (Next.js)

```bash
# é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•
docker-compose exec next npm run dev      # Turbopackä½¿ç”¨

# ãƒ“ãƒ«ãƒ‰
docker-compose exec next npm run build    # ãƒ—ãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³ãƒ“ãƒ«ãƒ‰
docker-compose exec next npm run start    # ãƒ—ãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³ã‚µãƒ¼ãƒãƒ¼èµ·å‹•

# ã‚³ãƒ¼ãƒ‰å“è³ªãƒã‚§ãƒƒã‚¯
docker-compose exec next npm run lint     # ESLintãƒã‚§ãƒƒã‚¯
docker-compose exec next npm run format   # Prettierè‡ªå‹•æ•´å½¢

# ä¾å­˜é–¢ä¿‚ç®¡ç†
docker-compose exec next npm install      # ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
docker-compose exec next npm audit        # è„†å¼±æ€§ãƒã‚§ãƒƒã‚¯
docker-compose exec next npm audit fix    # è„†å¼±æ€§è‡ªå‹•ä¿®æ­£
```

## ğŸ“š APIä»•æ§˜æ›¸

### Swagger UI ã‚¢ã‚¯ã‚»ã‚¹

é–‹ç™ºç’°å¢ƒã§Railsã‚µãƒ¼ãƒãƒ¼èµ·å‹•å¾Œã€ä»¥ä¸‹ã®URLã§APIä»•æ§˜æ›¸ã‚’ç¢ºèªã§ãã¾ã™ï¼š

**Swagger UI**: http://localhost:3000/api-docs

### API ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆä¸€è¦§

| ã‚«ãƒ†ã‚´ãƒª | ãƒ¡ã‚½ãƒƒãƒ‰ | ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ | èª¬æ˜ |
|---------|----------|--------------|------|
| **èªè¨¼** | POST | `/api/v1/auth` | ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ² |
| | POST | `/api/v1/auth/sign_in` | ãƒ­ã‚°ã‚¤ãƒ³ |
| | DELETE | `/api/v1/auth/sign_out` | ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ |
| | PUT | `/api/v1/auth` | ã‚¢ã‚«ã‚¦ãƒ³ãƒˆæ›´æ–° |
| | POST | `/api/v1/auth/password` | ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒªã‚»ãƒƒãƒˆ |
| **ãƒ©ãƒ³ãƒ‹ãƒ³ã‚°è¨˜éŒ²** | GET | `/api/v1/running_records` | è¨˜éŒ²ä¸€è¦§å–å¾— |
| | POST | `/api/v1/running_records` | è¨˜éŒ²ä½œæˆ |
| | GET | `/api/v1/running_records/:id` | è¨˜éŒ²è©³ç´°å–å¾— |
| | PUT | `/api/v1/running_records/:id` | è¨˜éŒ²æ›´æ–° |
| | DELETE | `/api/v1/running_records/:id` | è¨˜éŒ²å‰Šé™¤ |
| **æœˆé–“ç›®æ¨™** | GET | `/api/v1/monthly_goals` | æœˆé–“ç›®æ¨™ä¸€è¦§ |
| | POST | `/api/v1/monthly_goals` | æœˆé–“ç›®æ¨™ä½œæˆ |
| | GET | `/api/v1/current_monthly_goal` | ä»Šæœˆã®ç›®æ¨™å–å¾— |
| **å¹´é–“ç›®æ¨™** | GET | `/api/v1/yearly_goals` | å¹´é–“ç›®æ¨™ä¸€è¦§ |
| | POST | `/api/v1/yearly_goals` | å¹´é–“ç›®æ¨™ä½œæˆ |
| | GET | `/api/v1/current_yearly_goal` | ä»Šå¹´ã®ç›®æ¨™å–å¾— |
| **çµ±è¨ˆ** | GET | `/api/v1/running_statistics` | çµ±è¨ˆæƒ…å ±å–å¾— |

è©³ç´°ãªä»•æ§˜ã¯ `rails/swagger/v1/swagger.yaml` ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

## ğŸ”§ ç’°å¢ƒå¤‰æ•°ç®¡ç†

### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ (Next.js) - GitHub Secretsè¨­å®š

æœ¬ç•ªç’°å¢ƒã®ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ç’°å¢ƒå¤‰æ•°ã¯ã€GitHub Actionsã®Secretsã‚’ä½¿ç”¨ã—ã¦Vercelã«ãƒ‡ãƒ—ãƒ­ã‚¤æ™‚ã«è¨­å®šã•ã‚Œã¾ã™ã€‚

#### è¨­å®šæ‰‹é †

1. GitHubãƒªãƒã‚¸ãƒˆãƒªã® Settings â†’ Secrets and variables â†’ Actions ã¸ç§»å‹•
2. ã€ŒNew repository secretã€ã‚’ã‚¯ãƒªãƒƒã‚¯
3. ä»¥ä¸‹ã®ç’°å¢ƒå¤‰æ•°ã‚’è¿½åŠ ï¼š
   - `AWS_ACCESS_KEY_ID` - AWSã‚¢ã‚¯ã‚»ã‚¹ã‚­ãƒ¼ID
   - `AWS_SECRET_ACCESS_KEY` - AWSã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚¢ã‚¯ã‚»ã‚¹ã‚­ãƒ¼
   - `RAILS_MASTER_KEY` - Rails master.keyã®å†…å®¹
   - `NEXT_PUBLIC_API_URL` - APIã®ãƒ‘ãƒ–ãƒªãƒƒã‚¯URL
   - `NEXT_PUBLIC_BASE_URL` - ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®ãƒ™ãƒ¼ã‚¹URL
   - `INTERNAL_API_URL` - å†…éƒ¨API URLï¼ˆã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ç”¨ï¼‰

4. GitHub Actionsãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ï¼ˆ`.github/workflows/cd.yml`ï¼‰ã§ç’°å¢ƒå¤‰æ•°ã‚’å‚ç…§ï¼š
```yaml
# AWSèªè¨¼
aws-access-key-id: ${{ secrets.AWS_ACCESS_KEY_ID }}
aws-secret-access-key: ${{ secrets.AWS_SECRET_ACCESS_KEY }}

# Railsãƒ“ãƒ«ãƒ‰æ™‚
--build-arg RAILS_MASTER_KEY=${{ secrets.RAILS_MASTER_KEY }}
--build-arg NEXT_PUBLIC_BASE_URL=${{ secrets.NEXT_PUBLIC_BASE_URL }}

# Next.jsç’°å¢ƒå¤‰æ•°ï¼ˆç¾åœ¨ã¯ã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆä¸­ï¼‰
NEXT_PUBLIC_API_URL=${{ secrets.NEXT_PUBLIC_API_URL }}
NEXT_PUBLIC_BASE_URL=${{ secrets.NEXT_PUBLIC_BASE_URL }}
INTERNAL_API_URL=${{ secrets.INTERNAL_API_URL }}
```

**æ³¨æ„**: ç¾åœ¨ã€Next.jsã¯Vercelã§ç›´æ¥ãƒ‡ãƒ—ãƒ­ã‚¤ã•ã‚Œã¦ã„ã‚‹ãŸã‚ã€Next.jsã®ECSãƒ‡ãƒ—ãƒ­ã‚¤éƒ¨åˆ†ã¯ã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆã•ã‚Œã¦ã„ã¾ã™ã€‚

### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ (Rails) - Credentialsç®¡ç†

Railsã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ç’°å¢ƒå¤‰æ•°ã¯ã€æš—å·åŒ–ã•ã‚ŒãŸCredentialsã§ç®¡ç†ã—ã¦ã„ã¾ã™ã€‚

#### è¨­å®šæ–¹æ³•

```bash
# Credentialsãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†
docker-compose exec rails bash -c "EDITOR='vi' rails credentials:edit"
```

#### è¨­å®šå†…å®¹

```yaml
# ç’°å¢ƒåˆ¥è¨­å®š
development:
  frontend_url: http://localhost:8000  # é–‹ç™ºç’°å¢ƒã®ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰URL

production:
  frontend_url: https://runmates.net   # æœ¬ç•ªç’°å¢ƒã®ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰URL

test:
  frontend_url: http://localhost:8000  # ãƒ†ã‚¹ãƒˆç’°å¢ƒã®ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰URL

# æ—¢å­˜ã®secret_key_baseã¯ãã®ã¾ã¾æ®‹ã™
secret_key_base: xxxxx
```

#### viã‚¨ãƒ‡ã‚£ã‚¿ã®æ“ä½œ
1. `i` ã‚­ãƒ¼: æŒ¿å…¥ãƒ¢ãƒ¼ãƒ‰é–‹å§‹
2. ç·¨é›†å¾Œã€`ESC` ã‚­ãƒ¼: æŒ¿å…¥ãƒ¢ãƒ¼ãƒ‰çµ‚äº†
3. `:wq` + Enter: ä¿å­˜ã—ã¦çµ‚äº†
4. `:q!` + Enter: ä¿å­˜ã›ãšã«çµ‚äº†ï¼ˆå¤‰æ›´ã‚’ç ´æ£„ï¼‰

#### è¨­å®šå€¤ã®ç¢ºèª

```bash
# ç¾åœ¨ã®ç’°å¢ƒã®è¨­å®šã‚’ç¢ºèª
docker-compose exec rails rails runner "puts Rails.application.credentials.dig(Rails.env.to_sym, :frontend_url)"

# ç‰¹å®šç’°å¢ƒã®è¨­å®šã‚’ç¢ºèª
docker-compose exec rails rails runner "puts Rails.application.credentials.dig(:production, :frontend_url)"
```

#### æœ¬ç•ªç’°å¢ƒã§ã®ç®¡ç†
- `config/credentials.yml.enc`: æš—å·åŒ–ã•ã‚ŒãŸè¨­å®šï¼ˆãƒªãƒã‚¸ãƒˆãƒªã«å«ã¾ã‚Œã‚‹ï¼‰
- `config/master.key`: å¾©å·åŒ–ã‚­ãƒ¼ï¼ˆ.gitignoreã§é™¤å¤–ã€å®‰å…¨ã«ç®¡ç†ï¼‰
- ç’°å¢ƒå¤‰æ•°`RAILS_MASTER_KEY`ã§ã‚‚master.keyã‚’è¨­å®šå¯èƒ½

## ğŸ”„ é–‹ç™ºãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

### ãƒ–ãƒ©ãƒ³ãƒæˆ¦ç•¥

```
main              # æœ¬ç•ªç’°å¢ƒï¼ˆä¿è­·ãƒ–ãƒ©ãƒ³ãƒï¼‰
â”œâ”€â”€ feature/*     # æ–°æ©Ÿèƒ½é–‹ç™º
```

**é‡è¦**: `feature/*` ãƒ–ãƒ©ãƒ³ãƒã¯è‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤ãŒç„¡åŠ¹åŒ–ã•ã‚Œã¦ã„ã¾ã™

### ã‚³ãƒŸãƒƒãƒˆå‰ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

```bash
# 1. ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
docker-compose exec rails bundle exec rspec

# 2. Rubyã‚³ãƒ¼ãƒ‰å“è³ªãƒã‚§ãƒƒã‚¯
docker-compose exec rails bundle exec rubocop

# 3. JavaScriptã‚³ãƒ¼ãƒ‰å“è³ªãƒã‚§ãƒƒã‚¯
docker-compose exec next npm run lint

# 4. ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒã‚§ãƒƒã‚¯ï¼ˆå®šæœŸçš„ã«ï¼‰
docker-compose exec rails bundle exec brakeman
docker-compose exec rails bundle exec bundle-audit
```

### ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆä½œæˆ

1. Issueã‚’ä½œæˆã¾ãŸã¯é¸æŠ
2. featureãƒ–ãƒ©ãƒ³ãƒã‚’ä½œæˆ: `git checkout -b feature/issue-ç•ªå·-èª¬æ˜`
3. å¤‰æ›´ã‚’å®Ÿè£…
4. ãƒ†ã‚¹ãƒˆã‚’è¿½åŠ ãƒ»æ›´æ–°
5. ã‚³ãƒŸãƒƒãƒˆ: `git commit -m "feat: æ©Ÿèƒ½èª¬æ˜"`
6. ãƒ—ãƒƒã‚·ãƒ¥: `git push origin feature/branch-name`
7. PRãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ä½¿ç”¨ã—ã¦PRä½œæˆ
8. CI/CDãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã®é€šéã‚’ç¢ºèª
9. ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼å¾Œãƒãƒ¼ã‚¸

## ğŸš¢ ãƒ‡ãƒ—ãƒ­ã‚¤

### æœ¬ç•ªç’°å¢ƒæ§‹æˆ

#### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ (Next.js)
- **ãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°**: Vercel
- **è‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤**: GitHubã¨ã®é€£æºã«ã‚ˆã‚Šã€mainãƒ–ãƒ©ãƒ³ãƒã¸ã®ãƒ—ãƒƒã‚·ãƒ¥ã§è‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤
- **URL**: https://runmates.net

#### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ (Rails API)
- **ã‚¤ãƒ³ãƒ•ãƒ©**: AWS ECS Fargate
- **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹**: Amazon RDS (MySQL)
- **DNS**: Route 53
- **SSLè¨¼æ˜æ›¸**: AWS Certificate Manager

### ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ•ãƒ­ãƒ¼

#### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ (Vercel)
1. `main` ãƒ–ãƒ©ãƒ³ãƒã¸ã®ãƒãƒ¼ã‚¸
2. VercelãŒè‡ªå‹•çš„ã«ãƒ“ãƒ«ãƒ‰ãƒ»ãƒ‡ãƒ—ãƒ­ã‚¤ã‚’å®Ÿè¡Œ
3. ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒ‡ãƒ—ãƒ­ã‚¤æ©Ÿèƒ½ã«ã‚ˆã‚Šã€PRã”ã¨ã«ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ç’°å¢ƒã‚‚è‡ªå‹•ç”Ÿæˆ

#### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ (AWS)
1. `main` ãƒ–ãƒ©ãƒ³ãƒã¸ã®ãƒãƒ¼ã‚¸
2. GitHub Actions CI/CD ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³è‡ªå‹•å®Ÿè¡Œ
   - ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
   - ã‚³ãƒ¼ãƒ‰å“è³ªãƒã‚§ãƒƒã‚¯
   - Dockerã‚¤ãƒ¡ãƒ¼ã‚¸ãƒ“ãƒ«ãƒ‰
   - ECRã¸ãƒ—ãƒƒã‚·ãƒ¥
3. ECSã‚¿ã‚¹ã‚¯å®šç¾©æ›´æ–°
4. ãƒ­ãƒ¼ãƒªãƒ³ã‚°ãƒ‡ãƒ—ãƒ­ã‚¤å®Ÿè¡Œ

### ç’°å¢ƒå¤‰æ•°

æœ¬ç•ªç’°å¢ƒã®ç’°å¢ƒå¤‰æ•°ç®¡ç†ï¼š
- **ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ (Next.js)**: GitHub Actionsã®Secretsã§ç®¡ç†
- **ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ (Rails)**: Rails Credentialsã§æš—å·åŒ–ç®¡ç† (`config/credentials.yml.enc`)


## ğŸ“ ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯é–‹ç™ºä¸­ã§ã™ã€‚

## ğŸ‘¥ ãƒãƒ¼ãƒ 

- ãƒ¡ãƒ³ãƒ†ãƒŠãƒ¼: [hata-junnosuke](https://github.com/hata-junnosuke)

---

è³ªå•ã‚„ææ¡ˆãŒã‚ã‚‹å ´åˆã¯ã€[Issues](https://github.com/hata-junnosuke/runmates/issues) ã¾ã§ãŠé¡˜ã„ã—ã¾ã™ã€‚